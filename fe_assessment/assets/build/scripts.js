angular.module("live.event.service",[]).service("liveEventService",["$q",function(a){var b,c,d;return this.buildEventDetails=function(){var a=d;return a.lastAction=b.randomlySelectLastAction(),a},this.randomlySelectLastAction=function(){var a=Math.floor(4*Math.random()),b={actionType:c[a],team:Math.floor(2*Math.random())+1};return b},this.getEventDetails=function(){var c=a.defer();return c.resolve(b.buildEventDetails()),c.promise},this.wrapRandomActionGenerator=function(){var c=a.defer();return c.resolve(b.randomlySelectLastAction()),c.promise},b=this,c=["Goal Kick","On Goal","Penalty","Free Kick"],d={id:148122710,title:"Bayern Munich - Borussia Dortmund",sport:"Football",country:"Germany",version:"25fd0a7d5651a7a5cac1f10e5547b549a1bd59531cc4e866b6c91f31bc2b5fca",odds:[{displayName:"3-Way",results:[{id:16646752110,name:"1",value:"1,01",status:null,selected:!1},{id:16646752210,name:"X",value:"18",status:null,selected:!1},{id:16646752310,name:"2",value:"80",status:null,selected:!1}]},{displayName:"Double chance",results:[{id:16646752410,name:"1X",value:"2,4",status:"null",selected:!1},{id:16646752510,name:"12",value:"4,2",status:"null",selected:!1},{id:16646752610,name:"X2",value:"22,5",status:null,selected:!1}]},{displayName:"Handicap (0:1)",results:[{id:16646752710,name:"1",value:"1,15",status:null,selected:!1},{id:16646752810,name:"X",value:"5,00",status:null,selected:!1},{id:16646752910,name:"2",value:"18",status:null,selected:!1}]},{displayName:"Handicap (0:2)",results:[{id:16647651110,name:"1",value:"2,35",status:null,selected:!1},{id:16647651010,name:"X",value:"2,10",status:null,selected:!1},{id:16647651210,name:"2",value:"5,00",status:null,selected:!1}]},{displayName:"Handicap (0:3)",results:[{id:16647995510,name:"1",value:"7,00",status:"tendup",selected:!1},{id:16647995710,name:"X",value:"2,90",status:"tendown",selected:!1},{id:16647995610,name:"2",value:"1,55",status:null,selected:!1}]},{displayName:"Rem. time 3-way",results:[{id:16648128510,name:"1",value:"2,35",status:null,selected:!1},{id:16648128610,name:"X",value:"2,10",status:null,selected:!1},{id:16648128410,name:"2",value:"5,00",status:null,selected:!1}]},{displayName:"Next goal",results:[{id:16648128710,name:"1",value:"2,15",status:"tendup",selected:!1},{id:16648128810,name:"X",value:"2,55",status:null,selected:!1},{id:16648128910,name:"2",value:"3,80",status:"tendown",selected:!1}]},{displayName:"Goals from now (+/-1,5)",results:[{id:16648129210,name:"+",value:"3,10",status:null,selected:!1},{id:16648129310,name:"-",value:"1,30",status:null,selected:!1}]},{displayName:"Goals from now (+/-0,5)",results:[{id:16648129510,name:"+",value:"1,42",status:null,selected:!1},{id:16648129410,name:"-",value:"2,55",status:null,selected:!1}]},{displayName:"Goals from now (+/-2,5)",results:[{id:16648129010,name:"+",value:"8,00",status:"tendup",selected:!1},{id:16648129110,name:"-",value:"1,04",status:null,selected:!1}]}],bettingAvailable:!0,team1:"Bayern Munich",team2:"Borrusia Dortmund",ended:!1,livescore:{team1:"3",team2:"1",scoreString:"3:1"},liveevent:{action:"goalkick",team:1},matchtime:"38'",lastAction:{}},{getEventDetails:b.getEventDetails,getEventLastAction:b.wrapRandomActionGenerator}}]),angular.module("fe",["ngResource","ngRoute","live.event.service"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"app/views/home.html",controller:"HomeController"}).otherwise({redirectTo:"/"})}]),angular.module("fe").controller("HomeController",["$scope","liveEventService",function(a,b){function c(a){switch(a){case"Free Kick":return"freekick";case"Goal Kick":return"goalkick";case"On Goal":return"ongoal";case"Penalty":return"penalty";default:return!1}}a.error="",a.gameEnded=!1,a.gameTime="",a.topTeam="",a.bottomTeam="",a.topTeamScore=0,a.bottomTeamScore=0,a.actionName="",a.actionTeamName=0,a.liveEventTeam="",a.liveEventAction="",a.odds={},a.betslip=[],b.getEventDetails().then(function(b){return a.gameEnded=b.ended,a.gameEnded===!0?!1:(a.gameTime=b.matchtime,a.topTeam=b.team1,a.bottomTeam=b.team2,a.topTeamScore=b.livescore.team1,a.bottomTeamScore=b.livescore.team2,a.actionName=b.lastAction.actionType,a.actionTeamName=1==b.lastAction.team?b.team1:b.team2,a.liveEventTeam=b.liveevent.team,a.liveEventAction=b.liveevent.action,void(a.odds=b.odds))}),setInterval(function(){b.getEventLastAction().then(function(b){a.actionName=b.actionType,a.actionTeamName=1==b.team?a.topTeam:a.bottomTeam,a.liveEventTeam=b.team,a.liveEventAction=c(b.actionType)})},4e3),a.addBetslip=function(b){return angular.forEach(a.odds,function(c){angular.forEach(c.results,function(d){return d.id==b?(a.parentObject.betslips.push({id:d.id,displayName:c.displayName,name:d.name,value:d.value,teams:a.topTeam+" - "+a.bottomTeam}),a.parentObject.error="",a.parentObject.submitted=0,a.calculateGain(),!0):void 0})}),!1}}]),angular.module("fe").controller("MainController",["$scope",function(a){a.parentObject={},a.parentObject.betslips=[],a.parentObject.wager="5,00",a.parentObject.gain="0,00",a.parentObject.submitted=0,a.parentObject.error="",a.showBetslip=0,a.loaded=0,a.$on("$viewContentLoaded",function(){a.loaded=1}),a.removeBetslip=function(b){a.parentObject.betslips.splice(b,1),a.calculateGain()},a.calculateGain=function(){var b=a.parentObject.betslips.length*parseFloat(a.parentObject.wager.replace(",","."));b=parseFloat(b),!isNaN(b)&&0!=b&&b||(b=parseFloat("0,00")),a.parentObject.gain=b.toFixed(2).replace(".",",")},a.cleanBets=function(){a.parentObject.error="",a.parentObject.submitted=0,a.parentObject.betslips=[],a.calculateGain()},a.placeBet=function(){a.parentObject.submitted=0,a.parentObject.error="";var b=parseFloat(a.parentObject.wager);a.parentObject.betslips.length<=0?a.parentObject.error="Betslip is empty, please add bets first":isNaN(b)||0==b||!b?a.parentObject.error="Wager can not be 0, please set proper wager":(a.parentObject.submitted=1,a.parentObject.betslips=[],a.calculateGain())}}]);